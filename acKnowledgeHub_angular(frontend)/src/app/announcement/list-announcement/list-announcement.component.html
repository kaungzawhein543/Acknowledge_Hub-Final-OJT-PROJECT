<div class="container mx-auto p-4">
    <!-- Header Section -->
    <div class="flex justify-between items-center mb-4">
      <h1 class="text-xl font-semibold">Announcements List</h1>

  
    </div>
  
    <!-- Search and Filters Section -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
         <!-- Search Input -->
         <input
         type="text"
         class="border p-2 rounded w-500"
         placeholder="Search..."
         [(ngModel)]="searchQuery"
         (input)="onSearchChange()"
       />
      <!-- Date Filters -->
      <input
        type="date"
        class="border p-2 rounded w-full"
        [max]="endDateTime || todayDate"
        [value]="startDateTime"
        (change)="onStartDateChange($event)"
      />
      <input
        type="date"
        class="border p-2 rounded w-full"
        [min]="startDateTime" 
        [max]="todayDate"
        [value]="endDateTime"
        (change)="onEndDateChange($event)"
      />
  
      <!-- Checkbox Filters -->
      <div class="relative inline-block text-left">
        <button
          (click)="toggleFilterDropdown()"
          class="text-dark py-2 px-2 rounded-md"
          style="border: 1px solid rgb(174, 174, 174);"
        >
          <i class="fas fa-filter"></i> Filter
        </button>
        <div
          *ngIf="isFilterDropdownOpen"
          class="absolute mt-2 w-40 bg-gray-200 border border-gray-300 rounded-md shadow-lg z-60"
        >
          <label class="block px-3 py-2">
            <input
              type="checkbox"
              [(ngModel)]="activeChecked"
              (change)="onActiveCheckboxChange($event)"
            />
            Active
          </label>
          <label class="block px-3 py-2">
            <input
              type="checkbox"
              [(ngModel)]="inactiveChecked"
              (change)="onInactiveCheckboxChange($event)"
            />
            Inactive
          </label>
        </div>
      </div>
         <!-- Report Button -->
         <div class="relative">
          <button
            class="bg-blue-800  right-200 text-white py-2 px-4 rounded hover:bg-blue-800 "
            (click)="toggleReportDropdown()">
            Generate Report
          </button>
          <!-- Dropdown for Report Types -->
          <ul
            class="absolute mt-2 w-40 bg-white shadow-md rounded"
            *ngIf="isReportDropdownOpen">
            <li
              class="py-2 px-4 hover:bg-gray-100 cursor-pointer"
              (click)="generateReport('pdf')">
              Generate PDF
            </li>
            <li
              class="py-2 px-4 hover:bg-gray-100 cursor-pointer"
              (click)="generateReport('excel')">
              Generate Excel
            </li>
          </ul>
          <button mat-button  [matMenuTriggerFor]="menu">Columns</button>

        </div>

    </div>
  
   <!-- Column Visibility Toggle -->

    <mat-menu #menu="matMenu">
      <div class="checkbox-container">
        <mat-checkbox
          *ngFor="let col of columns"
          [(ngModel)]="columnVisibility[col.field]"
          (change)="onColumnVisibilityChange()"
          class="checkbox-item">
          {{ col.header }}
        </mat-checkbox>
      </div>
    </mat-menu>
    
    <!-- Table with Pagination -->
    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" class="min-w-full">
        <!-- Define Columns -->
        <ng-container *ngFor="let col of columns">
          <ng-container *ngIf="columnVisibility[col.field]">
            <ng-container [matColumnDef]="col.field">
              <th mat-header-cell *matHeaderCellDef> {{ col.header }} </th>
              <td mat-cell *matCellDef="let announcement">
                {{ getNestedProperty(announcement, col.field) || 'N/A' }}
              </td>
            </ng-container>
          </ng-container>
        </ng-container>
  
        <tr mat-header-row *matHeaderRowDef="selectedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: selectedColumns;"></tr>
      </table>
  
      <!-- Paginator -->
      <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 50]"></mat-paginator>
    </div>
  </div>
  