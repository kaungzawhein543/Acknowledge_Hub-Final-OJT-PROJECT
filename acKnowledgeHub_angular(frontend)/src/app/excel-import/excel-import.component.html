<div class="container p-6 bg-white shadow-lg rounded-lg max-w-lg mx-auto" *ngIf="!fileUploaded">
  <!-- Title -->
  <span class="text-3xl roboto-bold text-center text-gray-800 mb-6">Upload Excel File</span>

  <form #uploadForm="ngForm" (ngSubmit)="onSubmit()" novalidate class="space-y-6">
    <!-- File Upload Section -->
    <div>
      <div class="mt-1 flex items-center">
        <label for="file"
        class="inline-flex flex-col border-4 border-dotted border-gray-300 w-full h-96 items-center px-4 justify-center py-2 bg-gray-200 text-white rounded-md shadow-md cursor-pointer hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
        (dragover)="onDragOver($event)" 
        (dragleave)="onDragLeave($event)" 
        (drop)="onDrop($event)">
        <i class="fa-solid fa-arrow-up-from-bracket text-gray-400 text-9xl"></i>
        <span class="text-black"><strong>Choose a file</strong> or drag it here</span>
        <span class="text-gray-700 text-sm">Only Excel files</span>
      </label>
      
        <input 
          type="file" 
          id="file" 
          name="file" 
          (change)="onFileChange($event)" 
          accept=".xlsx, .xls" 
          #fileInput="ngModel" 
          ngModel 
          required 
          class="hidden"
        />
        <span class="ml-4 text-sm text-gray-500" *ngIf="file">{{ file.name }}</span>
      </div>
      <!-- Error Message -->
      <div *ngIf="fileError" class="text-red-600 text-sm mt-2">{{ fileError }}</div>
    </div>
  </form>
</div>

<div class="container p-6 bg-white shadow-lg rounded-lg  w-full" *ngIf="fileUploaded">
  <div class="flex flex-row justify-between items-center">
    <span class="text-xl font-semibold text-gray-800 mb-4">Staff Members Preview</span>
    <button type="button" (click)="openDeleteModal()"
      class="ms-auto bg-red-600 text-white font-semibold p-2 rounded text-sm hover:bg-red-700 transition duration-200 flex items-center">
      Reset
    </button>
  </div>
  <div class="mb-4">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (ngModelChange)="filterStaff()"
      placeholder="Search staff"
      class="px-4 py-2 border rounded-md w-full"
    />
  </div>
  <table class="min-w-full table-auto divide-y divide-gray-200">
    <thead class="bg-gray-100">
      <tr>
        <th class="px-4 py-6 text-left text-xs font-semibold text-gray-500 uppercase">staff_id</th> <!-- Add ID header -->
        <th class="px-4 py-6 text-left text-xs font-semibold text-gray-500 uppercase">Name</th>
        <th class="px-4 py-6 text-left text-xs font-semibold text-gray-500 uppercase">Email</th>
        <th class="px-4 py-6 text-left text-xs font-semibold text-gray-500 uppercase">Position</th>
        <th class="px-4 py-6 text-left text-xs font-semibold text-gray-500 uppercase">Company</th>
        <th class="px-4 py-6 text-left text-xs font-semibold text-gray-500 uppercase">Department</th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      <tr *ngFor="let staff of currentPageStaffs">
        <td class="px-4 py-2 text-sm text-gray-900">{{ staff.id }}</td>
        <td class="px-4 py-6 text-sm text-gray-900">{{ staff.name }}</td>
        <td class="px-4 py-6 text-sm text-gray-500">{{ staff.email }}</td>
        <td class="px-4 py-6 text-sm text-gray-500">{{ staff.position }}</td>
        <td class="px-4 py-6 text-sm text-gray-500">{{ staff.company }}</td>
        <td class="px-4 py-6 text-sm text-gray-500">{{ staff.department }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination Controls -->
  <div class="flex flex-row justify-between items-center">
    <div class="mt-4 flex justify-center space-x-2">
      <button 
        class="px-3 py-1 bg-gray-300 text-gray-700 rounded" 
        [disabled]="currentPage === 1" 
        (click)="changePage(currentPage - 1)">
        Previous
      </button>
      <button 
        class="px-3 py-1 bg-gray-300 text-gray-700 rounded" 
        [disabled]="(currentPage * itemsPerPage) >= staffs.length" 
        (click)="changePage(currentPage + 1)">
        Next
      </button>
    </div>
    <button type="button" (click)="onSubmit()"
      class="ms-auto bg-blue-600 text-white font-semibold p-2 rounded text-sm hover:bg-blue-700 transition duration-200 flex items-center">
      Submit
    </button>
  </div>
</div>
<app-confirmation-modal 
  #confirmationModal
  [message]="'Do you want to choose file again?'" 
  (confirmed)="onDeleteConfirmed()"
></app-confirmation-modal>